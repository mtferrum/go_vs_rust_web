# Prolog Web Server

Веб-сервер на языке Prolog для демонстрации декларативного подхода к программированию.

## Особенности

- **Декларативный подход**: Логика описывается через факты и правила
- **База знаний**: Пользователи хранятся как факты в базе знаний
- **JSON API**: Полная поддержка JSON для всех эндпоинтов
- **HTTP сервер**: Использует встроенную библиотеку SWI-Prolog

## Установка

### Требования
- SWI-Prolog 9.2.9 или выше

### Установка SWI-Prolog
```bash
# macOS
brew install swi-prolog

# Ubuntu/Debian
sudo apt-get install swi-prolog

# Windows
# Скачать с https://www.swi-prolog.org/Download.html
```

## Запуск

### Демонстрация
```bash
cd prolog_server
swipl final_server.pl
```

### Запуск сервера
```bash
cd prolog_server
swipl -g "start_server" -t halt final_server.pl
```

Сервер будет доступен по адресу: http://localhost:8083

## API Endpoints

### GET /
Главная страница с информацией об API

**Ответ:**
```json
{
  "success": true,
  "message": "Добро пожаловать в API веб-сервера на Prolog!",
  "data": {
    "version": "1.0.0",
    "endpoints": [
      "GET / - Главная страница",
      "GET /users - Получить всех пользователей",
      "GET /users/{id} - Получить пользователя по ID",
      "POST /users - Создать нового пользователя",
      "PUT /users/{id} - Обновить пользователя",
      "DELETE /users/{id} - Удалить пользователя"
    ]
  }
}
```

### GET /users
Получить всех пользователей

**Ответ:**
```json
{
  "success": true,
  "message": "Пользователи успешно получены",
  "data": [
    {
      "id": 1,
      "name": "Иван Иванов",
      "email": "ivan@example.com",
      "age": 25,
      "created_at": "2024-01-01T10:00:00Z"
    },
    {
      "id": 2,
      "name": "Мария Петрова",
      "email": "maria@example.com",
      "age": 30,
      "created_at": "2024-01-02T11:00:00Z"
    },
    {
      "id": 3,
      "name": "Алексей Сидоров",
      "email": "alex@example.com",
      "age": 28,
      "created_at": "2024-01-03T12:00:00Z"
    }
  ]
}
```

### GET /users/{id}
Получить пользователя по ID

**Ответ (успех):**
```json
{
  "success": true,
  "message": "Пользователь найден",
  "data": {
    "id": 1,
    "name": "Иван Иванов",
    "email": "ivan@example.com",
    "age": 25,
    "created_at": "2024-01-01T10:00:00Z"
  }
}
```

**Ответ (ошибка):**
```json
{
  "success": false,
  "message": "Пользователь не найден",
  "data": null
}
```

### POST /users
Создать нового пользователя

**Запрос:**
```json
{
  "name": "Новый Пользователь",
  "email": "new@example.com",
  "age": 30
}
```

**Ответ:**
```json
{
  "success": true,
  "message": "Пользователь успешно создан",
  "data": {
    "id": 4,
    "name": "Новый Пользователь",
    "email": "new@example.com",
    "age": 30,
    "created_at": "2024-01-04T10:00:00Z"
  }
}
```

### PUT /users/{id}
Обновить пользователя

**Запрос:**
```json
{
  "name": "Обновленное Имя",
  "email": "updated@example.com",
  "age": 35
}
```

**Ответ:**
```json
{
  "success": true,
  "message": "Пользователь успешно обновлен",
  "data": {
    "id": 1,
    "name": "Иван Иванов",
    "email": "ivan@example.com",
    "age": 25,
    "created_at": "2024-01-01T10:00:00Z"
  }
}
```

### DELETE /users/{id}
Удалить пользователя

**Ответ:**
```json
{
  "success": true,
  "message": "Пользователь успешно удален",
  "data": null
}
```

## Тестирование

### Тест с curl
```bash
# Главная страница
curl http://localhost:8083/

# Получить всех пользователей
curl http://localhost:8083/users

# Получить пользователя по ID
curl http://localhost:8083/users/1

# Создать пользователя
curl -X POST http://localhost:8083/users \
  -H "Content-Type: application/json" \
  -d '{"name":"Тест","email":"test@example.com","age":25}'

# Обновить пользователя
curl -X PUT http://localhost:8083/users/1 \
  -H "Content-Type: application/json" \
  -d '{"name":"Обновлено","email":"updated@example.com","age":30}'

# Удалить пользователя
curl -X DELETE http://localhost:8083/users/1
```

## Архитектура

### База знаний
Пользователи хранятся как факты в базе знаний Prolog:
```prolog
user(1, "Иван Иванов", "ivan@example.com", 25, "2024-01-01T10:00:00Z").
user(2, "Мария Петрова", "maria@example.com", 30, "2024-01-02T11:00:00Z").
user(3, "Алексей Сидоров", "alex@example.com", 28, "2024-01-03T12:00:00Z").
```

### Обработчики
Каждый эндпоинт реализован как предикат:
```prolog
handle_root(_Request) :-
    % Логика обработки главной страницы
    reply_json(Response).

handle_users(_Request) :-
    % Логика получения всех пользователей
    reply_json(Response).
```

### Маршрутизация
Маршруты регистрируются через http_handler:
```prolog
:- http_handler(root(.), handle_root, []).
:- http_handler(root(users), handle_users, [methods([get])]).
```

## Особенности Prolog

### Декларативность
- Логика описывается через факты и правила
- Нет явного управления потоком выполнения
- Фокус на том, "что" нужно сделать, а не "как"

### Унификация
- Автоматическое сопоставление аргументов
- Мощный механизм поиска решений
- Встроенная поддержка backtracking

### База знаний
- Факты хранятся в базе знаний
- Легкое добавление и удаление фактов
- Встроенные предикаты для работы с базой

## Ограничения

### Производительность
- Интерпретируемый язык
- Медленнее компилируемых языков
- Ограниченная поддержка многопоточности

### Экосистема
- Ограниченное количество веб-библиотек
- Малое сообщество разработчиков
- Сложность интеграции с внешними системами

### Сложность
- Непривычный для большинства разработчиков
- Сложная отладка
- Ограниченная поддержка современных веб-стандартов

## Сравнение с другими языками

| Критерий | Prolog | Go | Rust | Forth |
|----------|--------|----|----- |-------|
| **Парадигма** | Декларативная | Императивная | Императивная | Стековая |
| **Производительность** | Низкая | Высокая | Максимальная | Средняя |
| **Сложность изучения** | Очень высокая | Низкая | Высокая | Высокая |
| **Экосистема** | Ограниченная | Обширная | Растущая | Минимальная |
| **Веб-разработка** | Ограниченная | Отличная | Хорошая | Минимальная |

## Заключение

Prolog представляет интересный декларативный подход к программированию, но имеет ограниченную применимость для веб-разработки. Основные преимущества:

- **Декларативность**: Естественное описание логики
- **База знаний**: Встроенная поддержка фактов и правил
- **Унификация**: Мощный механизм сопоставления

Основные недостатки:
- **Производительность**: Медленнее других языков
- **Экосистема**: Ограниченные возможности для веб-разработки
- **Сложность**: Высокая кривая обучения

Prolog лучше подходит для:
- Экспертных систем
- Логического программирования
- Образовательных целей
- Исследовательских проектов

Для веб-разработки рекомендуется использовать Go, Rust или другие специализированные языки.

